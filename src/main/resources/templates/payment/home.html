<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment Security</title>

    <link th:href="@{~/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{~/css/payment/home.css}" rel="stylesheet">
    <script src="https://kit.fontawesome.com/041a1ea4df.js" crossorigin="anonymous"></script>
</head>
<body>
<!-- Nav Bar -->

<nav class="navbar navbar-light bg-custom mr-auto">
    <a class="navbar-brand mr-auto" th:href="@{/}">
        <img  th:src="@{${'data:image/png;base64,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'}}"
              class="d-inline-block align-top img-logo" />
        Apple
    </a>
    <div sec:authorize="hasRole('ROLE_USER')">
        <a style="text-decoration: none;" th:href="@{/profile/home}">
            <span style="color: white;margin-right: 20px;" sec:authentication="name"
            ></span>
        </a>
    </div>
    <form class="form-inline" th:action="@{/logout}" method="post">
        <button sec:authorize="isAuthenticated()"  class="btn btn-outline-danger btn-custom-logout" type="submit" > LOGOUT </button>
        <button sec:authorize="isAnonymous()" th:action="@{/login}" class="btn btn-outline-danger btn-custom-login" type="submit"> LOGIN </button>
    </form>
</nav>

<!-- Body -->
<div class="container">
    <div class="row">
        <div class="col-sm-6">
            <h3> Payment Method </h3>
            <!-- One time payment form -->
            <form class="form-inline" th:action="@{/payment/onetimepay}" method="get">
                <button class="btn btn-outline-danger btn-custom-onetimepay" type="submit" required> One Time Pay </button>
            </form>
            <!-- Add card detail button -->
            <form class="form-inline"  th:action="@{/payment/addcard}" method="get">
                <button class="btn btn-outline-danger btn-custom-addcard" type="submit"> Add New Card </button>
            </form>
        </div>
        <div class="col-sm-6">
            <!-- Saved Card Details -->
            <div class="container">
                <h4> Saved Card Details </h4>
                <div id="scrollable">
                    <tr
                            th:each="card, iStat : ${cards}"
                            th:style="${iStat.odd}? 'font-weight: bold;'"
                            th:alt-title="${iStat.even}? 'even' : 'odd'">

                        <form class="form-inline" th:action="@{'/payment/paymentgateway/' + ${card.id}}" >
                            <div
                                    class="card"
                                    style="width: 22rem; margin-top: 40px; margin-left: 50px;"
                            >
                                <div style="background-color: black;text-align: left" class="card-header" >
                                    <a  th:href="@{'/payment/removecard/' + ${card.id}}">
                                        <i class="far fa-trash-alt"></i></i>
                                    </a>
                                </div>
                                <div  style="background-color: black;" class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <div class="row">
                                            <li class="list-group-item list-custom" >Account Number : </li>
                                            <li class="list-group-item list-custom" > <td th:text="${card.accountnumber}"></td> </li>
                                        </div>
                                        <div class="row">
                                            <li class="list-group-item list-custom">Account User : </li>
                                            <li class="list-group-item list-custom" > <td th:text="${card.firstname} + ' ' + ${card.lastname}" /> </li>
                                        </div>
                                    </ul>
                                    <div class="row">
                                        <div style="margin-left: 1px;" class="row">
                                            <li class="list-group-item list-custom"> Exp Date : </li>
                                            <li class="list-group-item list-custom"> <td th:text="${card.expdate}" /> </li>
                                        </div>
                                        <input style="width: 70px ;height: 35px"
                                                type="password" class="form-control custom-input" id="cvv" placeholder="CVV" required
                                        />
                                    </div>
                                    <div class="row">
                                            <button class="btn btn-outline-danger btn-custom-pay" type="submit"> Pay </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </tr>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
